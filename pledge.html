<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="description" content="Pledge Your Support - Stewardship, Impact, and Testimonies at St. Francis Church">
    <title>Pledge | St. Francis of Assisi Church</title>
    
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/components/header.css">
    
    <link rel="stylesheet" href="css/components/footer.css">
    <link rel="stylesheet" href="css/components/hero.css">
    <link rel="stylesheet" href="css/components/cards.css">
    <link rel="stylesheet" href="css/components/forms.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- ============ HEADER & NAVIGATION ============ -->
    <header class="header">
        <div class="header__container">
            <a href="index.html" class="header__logo">
                <img src="Assets/LOGO/st.png" alt="St. Francis Logo" class="header__logo-image"> <span>St. Francis of Assisi</span>
            </a>
            <nav class="header__nav">
                <li><a href="index.html">Home</a></li>
                <li><a href="about.html">About Us</a></li>
                <li><a href="services.html">Sacraments &amp; Worship</a></li>
                <li><a href="ministries.html">Ministries</a></li>
                <li><a href="structure.html">Structure</a></li>
                <li><a href="pledge.html">Pledge</a></li>
                <li><a href="donations.html">Donations</a></li>
                <li><a href="contact.html">Contact</a></li>
            </nav>
            <button class="header__menu-toggle" aria-label="Toggle Navigation Menu">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </header>

    <!-- ============ HERO SECTION ============ -->
    <section class="hero">
        <div class="hero__background"></div>
        <div class="hero__content">
            <h1 class="hero__title">Pledge Your Support</h1>
            <p class="hero__subtitle">Stewardship, Impact, and Commitment to Our Mission</p>
        </div>
    </section>

    <!-- ============ THEOLOGY OF GIVING ============ -->
    <section class="bg-cream">
        <div class="container">
            <h2 class="text-center">Stewardship &amp; Generosity</h2>
            <p class="text-center" style="max-width: 800px; margin: var(--spacing-lg) auto; color: var(--color-text-secondary);">
                We believe that giving is an act of worship and gratitude. Through your pledge, you participate in God’s work in our community, supporting ministry, mission, and the sacred life of the Church.
            </p>

            <div class="card-grid" style="margin-top: var(--spacing-2xl);">
                <div class="card">
                    <div class="card__content text-center">
                        <i class="fas fa-hand-holding-heart card__icon"></i>
                        <h3 class="card__title">Biblical Foundation</h3>
                        <p class="card__description">
                            “God loves a cheerful giver.” — 2 Corinthians 9:7. Your generosity reflects Christ’s love and builds up the Body of Christ.
                        </p>
                    </div>
                </div>
                <div class="card">
                    <div class="card__content text-center">
                        <i class="fas fa-church card__icon"></i>
                        <h3 class="card__title">Our Commitment</h3>
                        <p class="card__description">
                            We steward every pledge with transparency and care, directing resources toward worship, outreach, and pastoral ministry.
                        </p>
                    </div>
                </div>
                <div class="card">
                    <div class="card__content text-center">
                        <i class="fas fa-seedling card__icon"></i>
                        <h3 class="card__title">Growing Together</h3>
                        <p class="card__description">
                            Your pledge helps sustain and grow our ministries, enabling us to serve families, youth, and neighbors in Mamelodi West.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ============ IMPACT OF YOUR PLEDGE ============ -->
    <section style="background-color: var(--color-white);">
        <div class="container">
            <h2 class="text-center">Impact of Your Support</h2>
            <ul style="max-width: 800px; margin: var(--spacing-2xl) auto; list-style: none; color: var(--color-text-secondary);">
                <li style="padding: var(--spacing-md) 0; border-bottom: 1px solid rgba(212, 175, 55, 0.3);">
                    <strong style="color: var(--color-primary);">Community Outreach</strong> — Food, clothing, and support programs for families in need.
                </li>
                <li style="padding: var(--spacing-md) 0; border-bottom: 1px solid rgba(212, 175, 55, 0.3);">
                    <strong style="color: var(--color-primary);">Youth &amp; Children</strong> — Discipleship, mentorship, and safe spaces for growth.
                </li>
                <li style="padding: var(--spacing-md) 0; border-bottom: 1px solid rgba(212, 175, 55, 0.3);">
                    <strong style="color: var(--color-primary);">Worship &amp; Music</strong> — Choir ministry, instruments, and liturgical resources.
                </li>
                <li style="padding: var(--spacing-md) 0; border-bottom: 1px solid rgba(212, 175, 55, 0.3);">
                    <strong style="color: var(--color-primary);">Facilities &amp; Maintenance</strong> — Caring for the sanctuary and church grounds.
                </li>
                <li style="padding: var(--spacing-md) 0;">
                    <strong style="color: var(--color-primary);">Pastoral Care</strong> — Support for home visits, counseling, and spiritual guidance.
                </li>
            </ul>
        </div>
    </section>

<!-- ============ PLEDGE INTENT FORM ============ -->
<section class="bg-pale-gold">
    <div class="container">
        <h2 class="text-center">Pledge Intent Form</h2>
        <p class="text-center" style="max-width: 800px; margin: var(--spacing-lg) auto; color: var(--color-text-secondary);">
            Please complete the form below to share your pledge intentions. This helps us plan ministries responsibly and prayerfully.
        </p>

        <div class="card" style="max-width: 800px; margin: var(--spacing-2xl) auto;">
            <div class="card__content">
                <form id="pledgeForm" novalidate>
                    <!-- INITIAL FORM FIELDS -->
                    <div id="initialFormFields">
                        <div class="form-group">
                            <label for="fullName">Full Name</label>
                            <input type="text" id="fullName" name="fullName" placeholder="Your full name">
                        </div>

                        <div class="form-group">
                            <label for="email">Email (Gmail only)</label>
                            <input type="email" id="email" name="email" placeholder="yourname@gmail.com">
                        </div>

                        <div class="form-group">
                            <label for="phone">Phone (South Africa)</label>
                            <input type="tel" id="phone" name="phone" placeholder="e.g., +27 12 345 6789">
                        </div>

                        <div class="form-group">
                            <label for="amount">Pledge Amount (ZAR)</label>
                            <input type="number" id="amount" name="amount" placeholder="e.g., 250" min="1" step="1">
                        </div>

                        <div class="form-group">
                            <label for="frequency">Frequency</label>
                            <select id="frequency" name="frequency">
                                <option value="">Select frequency</option>
                                <option value="one-time">One-time</option>
                                <option value="weekly">Weekly</option>
                                <option value="monthly">Monthly</option>
                                <option value="quarterly">Quarterly</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="startDate">Start Date (optional)</label>
                            <input type="date" id="startDate" name="startDate">
                        </div>

                        <div class="form-group">
                            <label for="message">Message (optional)</label>
                            <textarea id="message" name="message" rows="4" placeholder="Share any notes or prayer requests"></textarea>
                        </div>
                    </div>

                    <!-- PAYMENT METHOD SECTION (Initially Hidden) -->
                    <div id="paymentSection" style="display: none;">
                        <h3 style="margin-bottom: var(--spacing-lg); color: var(--color-primary);">Payment Method</h3>
                        <p style="margin-bottom: var(--spacing-md); color: var(--color-text-secondary); font-style: italic;">Test mode - Card validation is disabled for testing</p>
                        
                        <div class="form-group">
                            <label for="cardNumber">Card Number</label>
                            <div style="position: relative;">
                                <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456">
                                <div style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); display: flex; gap: 8px;">
                                    <i class="fab fa-cc-visa" style="font-size: 24px; color: #1A1F71;"></i>
                                    <i class="fab fa-cc-mastercard" style="font-size: 24px; color: #EB001B;"></i>
                                </div>
                            </div>
                        </div>

                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-md);">
                            <div class="form-group">
                                <label for="expiry">Expiry Date</label>
                                <input type="text" id="expiry" placeholder="MM/YY">
                            </div>
                            <div class="form-group">
                                <label for="cvv">CVV</label>
                                <input type="text" id="cvv" placeholder="123">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="cardholderName">Cardholder Name</label>
                            <input type="text" id="cardholderName" placeholder="Name as on card">
                        </div>
                    </div>

                    <!-- ANIMATION CONTAINER -->
                    <div id="animationContainer" style="display: none; text-align: center; margin: var(--spacing-lg) 0;">
                        <!-- WebM animations will be displayed here -->
                    </div>

                    <!-- MESSAGE DISPLAY -->
                    <div id="formMessage" style="margin-top: var(--spacing-md); text-align: center; font-weight: 500;"></div>

                    <!-- SUBMIT BUTTON -->
                    <button type="button" class="btn" id="submitButton">Proceed with payment</button>
                </form>
            </div>
        </div>
    </div>
</section>

<style>
    .payment-icons {
        position: absolute;
        right: 10px;
        top: 50%;
        transform: translateY(-50%);
        display: flex;
        gap: 8px;
    }
    
    #paymentSection {
        border-top: 2px solid var(--color-pale-gold);
        padding-top: var(--spacing-xl);
        margin-top: var(--spacing-xl);
    }
    
    #paymentSection h3 {
        font-size: 1.25rem;
        font-weight: 600;
    }
    
    #formMessage {
        min-height: 60px;
    }
    
    #formMessage.success {
        color: #10b981;
    }
    
    #formMessage.error {
        color: #ef4444;
    }
    
    #formMessage.info {
        color: #3b82f6;
    }
</style>

<script>
document.getElementById('submitButton').addEventListener('click', function() {
    const submitButton = document.getElementById('submitButton');
    const paymentSection = document.getElementById('paymentSection');
    const animationContainer = document.getElementById('animationContainer');
    const formMessage = document.getElementById('formMessage');
    const pledgeForm = document.getElementById('pledgeForm');
    
    // Check if we're in initial form step or payment step
    if (paymentSection.style.display === 'none') {
        // Just show payment section without validation
        formMessage.innerHTML = '';
        paymentSection.style.display = 'block';
        submitButton.textContent = 'Complete Payment';
        
        // Smooth scroll to payment section
        paymentSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
        
    } else {
        // Payment step - process payment
        // Disable submit button and show processing animation
        submitButton.disabled = true;
        submitButton.style.opacity = '0.5';
        formMessage.innerHTML = '';
        
        // Show Money Transfer animation (processing)
        animationContainer.style.display = 'block';
        animationContainer.innerHTML = `
            <video width="200" height="150" autoplay loop muted>
                <source src="Assets/Payment_animations/Money Transfer.webm" type="video/webm">
                Your browser does not support the video tag.
            </video>
            <p style="margin-top: var(--spacing-sm); color: var(--color-text-secondary);">Processing your payment...</p>
        `;
        
        // Simulate payment processing
        setTimeout(() => {
            // For testing, we'll simulate a successful payment
            const paymentSuccessful = Math.random() > 0.2; // 80% success rate for testing
            
            if (paymentSuccessful) {
                // Show Payment Successful animation
                animationContainer.innerHTML = `
                    <video width="200" height="150" autoplay loop muted>
                        <source src="Assets/Payment_animations/Payment Successful.webm" type="video/webm">
                        Your browser does not support the video tag.
                    </video>
                `;
                
                formMessage.innerHTML = 'Payment successful! Thank you for your pledge.';
                formMessage.className = 'success';
                
                // After 2 seconds, show Handshake animation (APPEND, don't replace)
                setTimeout(() => {
                    // Add Handshake animation BELOW the success animation
                    const handshakeHTML = `
                        <div style="margin-top: var(--spacing-md);">
                            <video width="200" height="150" autoplay loop muted>
                                <source src="Assets/Payment_animations/Handshake.webm" type="video/webm">
                                Your browser does not support the video tag.
                            </video>
                            <p style="margin-top: var(--spacing-sm); color: var(--color-primary); font-weight: 600;">Thank you for your partnership!</p>
                        </div>
                    `;
                    
                    // Append handshake to existing animation container
                    animationContainer.innerHTML += handshakeHTML;
                }, 2000);
                
                // Reset form fields but KEEP animations and messages
                setTimeout(() => {
                    // Reset all form fields
                    pledgeForm.reset();
                    
                    // Reset UI state but KEEP animations and messages visible
                    paymentSection.style.display = 'none';
                    submitButton.textContent = 'Proceed with payment';
                    submitButton.disabled = false;
                    submitButton.style.opacity = '1';
                    
                    // DO NOT clear animationContainer or formMessage
                    // They stay visible with their content
                    
                }, 7000);
                
            } else {
                // Show Payment Failed animation
                animationContainer.innerHTML = `
                    <video width="200" height="150" autoplay loop muted>
                        <source src="Assets/Payment_animations/Payment Failed.webm" type="video/webm">
                        Your browser does not support the video tag.
                    </video>
                `;
                
                formMessage.innerHTML = 'Payment failed. Please try again.';
                formMessage.className = 'error';
                
                // Re-enable submit button
                submitButton.disabled = false;
                submitButton.style.opacity = '1';
                
                // DO NOT clear animations on failure - they stay visible
                // User can try again with the failed animation still showing
            }
        }, 3000); // 3 second processing time
    }
});

// Format card number input
document.getElementById('cardNumber')?.addEventListener('input', function(e) {
    let value = e.target.value.replace(/\s+/g, '').replace(/[^0-9]/gi, '');
    let formattedValue = '';
    for (let i = 0; i < value.length; i++) {
        if (i > 0 && i % 4 === 0) {
            formattedValue += ' ';
        }
        formattedValue += value[i];
    }
    e.target.value = formattedValue;
});

// Format expiry date
document.getElementById('expiry')?.addEventListener('input', function(e) {
    let value = e.target.value.replace(/\s+/g, '').replace(/[^0-9]/gi, '');
    if (value.length >= 2) {
        e.target.value = value.slice(0, 2) + '/' + value.slice(2, 4);
    } else {
        e.target.value = value;
    }
});

// Prevent form submission (since we're using button type="button")
document.getElementById('pledgeForm').addEventListener('submit', function(e) {
    e.preventDefault();
    return false;
});
</script>

    <!-- ============ TESTIMONIES ============ -->
    <section style="background-color: var(--color-white);">
        <div class="container">
            <h2 class="text-center">Testimonies of Grace</h2>
            <div class="card-grid" style="margin-top: var(--spacing-2xl);">
                <div class="card">
                    <div class="card__content text-center">
                        <i class="fas fa-quote-left card__icon"></i>
                        <p class="card__description">“Through this community, God has provided for our family in times of need.”</p>
                        <p class="card__title">— Thandi M.</p>
                    </div>
                </div>
                <div class="card">
                    <div class="card__content text-center">
                        <i class="fas fa-quote-left card__icon"></i>
                        <p class="card__description">“Our youth ministry gave my son faith and purpose.”</p>
                        <p class="card__title">— Sipho N.</p>
                    </div>
                </div>
                <div class="card">
                    <div class="card__content text-center">
                        <i class="fas fa-quote-left card__icon"></i>
                        <p class="card__description">“Serving with the choir has deepened my worship.”</p>
                        <p class="card__title">— Grace O.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ============ FOOTER ============ -->
    <footer class="footer">
        <div class="footer__container">
            <div class="footer__content">
                <div class="footer__section">
                    <h3><i class="fas fa-life-ring"></i> Help</h3>
                    <ul class="footer__links">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="ministries.html">Ministries</a></li>
                        <li><a href="services.html">Sacraments &amp; Worship</a></li>
                        <li><a href="structure.html">Structure</a></li>
                        <li><a href="pledge.html">Pledge</a></li>
                        <li><a href="donations.html">Donations</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>

                <div class="footer__section">
                    <h3><i class="fas fa-scale-balanced"></i> Legal</h3>
                    <ul class="footer__links">
                        <li><a href="#" id="cookie-settings">Cookie Settings</a></li>
                        <li><a href="privacy.html"><i class="fas fa-shield-alt"></i> Privacy Policy</a></li>
                        <li><a href="terms.html"><i class="fas fa-file-contract"></i> Terms of Use</a></li>
                    </ul>
                </div>

                <div class="footer__section">
                    <h3><i class="fas fa-share-alt"></i> Connect With Us</h3>
                    <ul class="footer__links">
                        <li><a href="https://facebook.com" target="_blank" rel="noopener noreferrer"><i class="fab fa-facebook-f"></i> Facebook</a></li>
                        <li><a href="https://instagram.com" target="_blank" rel="noopener noreferrer"><i class="fab fa-instagram"></i> Instagram</a></li>
                        <li><a href="https://tiktok.com" target="_blank" rel="noopener noreferrer"><i class="fab fa-tiktok"></i> TikTok</a></li>
                        <li><a href="https://wa.me/27123456789" target="_blank" rel="noopener noreferrer"><i class="fab fa-whatsapp"></i> WhatsApp</a></li>
                    </ul>
                </div>

                <div class="footer__section">
                    <h3><i class="fas fa-map-marker-alt"></i> Find Us</h3>
                    <div class="footer__map-wrapper">
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3594.849144822222!2d28.348811443136736!3d-25.709418299999996!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x1e955f79dce83f6f%3A0x3321b562a4b58e79!2sSt%20Francis%20Anglican%20Church!5e0!3m2!1sen!2sza!4v1750436045217!5m2!1sen!2sza" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade" title="St. Francis Anglican Church Location"></iframe>
                    </div>
                </div>
            </div>

            <div class="footer__bottom">
                <p class="footer__copyright">
                    © 2026 St. Francis of Assisi Mamelodi West. All rights reserved.
                </p>
                <p class="footer__credit">Website made by <a href="https://linetechsoftwares.co.za/" target="_blank" rel="noopener noreferrer">Line Tech Softwares</a></p>
            </div>
        </div>
    </footer>

    <script src="js/security.js"></script>
    <script src="js/vpn_pig.js"></script>
    <script src="js/cookie-banner.js"></script>
    <script src="js/forms.js"></script>
    <script src="js/main.js"></script>
</body>
</html>